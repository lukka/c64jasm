(function(){"use strict";var e={781:function(e,r,t){var n=t(963),a=t(252);function l(e,r,t,n,l,o){var s=(0,a.up)("C64Registers");return(0,a.wg)(),(0,a.j4)(s)}var o=t(577),s=function(e){return(0,a.dD)("data-v-db4cec7c"),e=e(),(0,a.Cn)(),e},i={class:"registers"},c={class:"register-line"},u=s((function(){return(0,a._)("span",{class:"line-label"},"Regs:",-1)})),f=s((function(){return(0,a._)("span",{class:"label"},"A",-1)})),d=["value"],p=s((function(){return(0,a._)("span",{class:"label"},"X",-1)})),v=["value"],m=s((function(){return(0,a._)("span",{class:"label"},"Y",-1)})),y=["value"],g=s((function(){return(0,a._)("span",{class:"label"},"SP",-1)})),_=["value"],h=s((function(){return(0,a._)("span",{class:"label"},"PC",-1)})),b=["value"],w={class:"flag-line"},C=s((function(){return(0,a._)("span",{class:"line-label"},"Flags:",-1)})),M={class:"memory-viewer"},S={class:"memory-controls"},x=s((function(){return(0,a._)("label",{for:"memOffset"},"Base Address:",-1)})),A={class:"memory-grid"},F={class:"memory-scroll-container"},R=s((function(){return(0,a._)("div",{class:"memory-header"},[(0,a._)("span",{class:"addr-col"},"Address"),(0,a._)("span",{class:"hex-col"},[(0,a._)("span",{class:"hex-header-byte"},"00"),(0,a._)("span",{class:"hex-header-byte"},"01"),(0,a._)("span",{class:"hex-header-byte"},"02"),(0,a._)("span",{class:"hex-header-byte"},"03"),(0,a._)("span",{class:"hex-header-byte"},"04"),(0,a._)("span",{class:"hex-header-byte"},"05"),(0,a._)("span",{class:"hex-header-byte"},"06"),(0,a._)("span",{class:"hex-header-byte"},"07"),(0,a._)("span",{class:"hex-header-byte"},"08"),(0,a._)("span",{class:"hex-header-byte"},"09"),(0,a._)("span",{class:"hex-header-byte"},"0A"),(0,a._)("span",{class:"hex-header-byte"},"0B"),(0,a._)("span",{class:"hex-header-byte"},"0C"),(0,a._)("span",{class:"hex-header-byte"},"0D"),(0,a._)("span",{class:"hex-header-byte"},"0E"),(0,a._)("span",{class:"hex-header-byte"},"0F")]),(0,a._)("span",{class:"ascii-col"},"ASCII")],-1)})),I={class:"memory-rows"},P={class:"addr-col"},D={class:"hex-col"},k=["value","onBlur"],B={class:"ascii-col"},V={class:"sprite-viewer"},Y={class:"sprite-header-controls"},H={class:"sprite-scale-controls"},X=s((function(){return(0,a._)("label",null,"Scale:",-1)})),U={class:"scale-value"},O={class:"sprite-grid"},N={class:"sprite-header"},z=["title"],L=["title"],Z={class:"sprite-content"},$=["width","height"],j={class:"sprite-regs"},K={class:"reg-row",title:"X position (0-511, includes MSB from $D010)"},T=s((function(){return(0,a._)("span",{class:"reg-label"},"X:",-1)})),W={class:"reg-value"},E={class:"reg-row",title:"Y position (0-255)"},q=s((function(){return(0,a._)("span",{class:"reg-label"},"Y:",-1)})),G={class:"reg-value"},J=["title"],Q=s((function(){return(0,a._)("span",{class:"reg-label"},"C:",-1)})),ee={class:"reg-value"},re=["title"],te=s((function(){return(0,a._)("span",{class:"reg-label"},"P:",-1)})),ne={class:"reg-value"},ae=["title"],le=s((function(){return(0,a._)("span",{class:"reg-label"},"E:",-1)})),oe={class:"reg-value"},se=["title"],ie=s((function(){return(0,a._)("span",{class:"reg-label"},"Z:",-1)})),ce={class:"reg-value"},ue={class:"screen-viewer"},fe={class:"screen-controls"},de={class:"control-row"},pe=s((function(){return(0,a._)("label",{for:"screenSource"},"Source:",-1)})),ve=s((function(){return(0,a._)("option",{value:"vic"},"VIC-II Auto",-1)})),me=s((function(){return(0,a._)("option",{value:"manual"},"Manual Address",-1)})),ye=[ve,me],ge=s((function(){return(0,a._)("label",{for:"screenMode"},"Mode:",-1)})),_e=s((function(){return(0,a._)("option",{value:"text-sc"},"Text Single Color",-1)})),he=s((function(){return(0,a._)("option",{value:"text-mc"},"Text Multicolor",-1)})),be=s((function(){return(0,a._)("option",{value:"bitmap-sc"},"Bitmap Single Color",-1)})),we=s((function(){return(0,a._)("option",{value:"bitmap-mc"},"Bitmap Multicolor",-1)})),Ce=[_e,he,be,we],Me={key:0,class:"control-row"},Se=s((function(){return(0,a._)("label",{for:"screenAddr"},"Screen:",-1)})),xe=s((function(){return(0,a._)("label",{for:"colorAddr"},"Color:",-1)})),Ae={for:"charsetAddr"},Fe=["placeholder"],Re={ref:"screenCanvas",class:"screen-canvas",width:"320",height:"200"};function Ie(e,r,t,l,s,ve){var me=(0,a.up)("CollapsibleTile");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(me,{title:"Registers & Flags"},{default:(0,a.w5)((function(){return[(0,a._)("div",c,[u,f,(0,a._)("input",{class:"value editable",value:e.formatHex(e.A,2),onBlur:r[0]||(r[0]=function(r){return e.updateRegister("A",r)}),onKeyup:r[1]||(r[1]=(0,n.D2)((function(e){return e.target.blur()}),["enter"]))},null,40,d),p,(0,a._)("input",{class:"value editable",value:e.formatHex(e.X,2),onBlur:r[2]||(r[2]=function(r){return e.updateRegister("X",r)}),onKeyup:r[3]||(r[3]=(0,n.D2)((function(e){return e.target.blur()}),["enter"]))},null,40,v),m,(0,a._)("input",{class:"value editable",value:e.formatHex(e.Y,2),onBlur:r[4]||(r[4]=function(r){return e.updateRegister("Y",r)}),onKeyup:r[5]||(r[5]=(0,n.D2)((function(e){return e.target.blur()}),["enter"]))},null,40,y),g,(0,a._)("input",{class:"value editable",value:e.formatHex(e.SP,2),onBlur:r[6]||(r[6]=function(r){return e.updateRegister("SP",r)}),onKeyup:r[7]||(r[7]=(0,n.D2)((function(e){return e.target.blur()}),["enter"]))},null,40,_),h,(0,a._)("input",{class:"value editable wide-input",value:e.formatHex(e.PC,4),onBlur:r[8]||(r[8]=function(r){return e.updateRegister("PC",r)}),onKeyup:r[9]||(r[9]=(0,n.D2)((function(e){return e.target.blur()}),["enter"]))},null,40,b)]),(0,a._)("div",w,[C,(0,a._)("span",{class:(0,o.C_)(["flag",{active:e.N}])},"N",2),(0,a._)("span",{class:(0,o.C_)(["flag",{active:e.V}])},"V",2),(0,a._)("span",{class:(0,o.C_)(["flag",{active:e.B}])},"B",2),(0,a._)("span",{class:(0,o.C_)(["flag",{active:e.D}])},"D",2),(0,a._)("span",{class:(0,o.C_)(["flag",{active:e.I}])},"I",2),(0,a._)("span",{class:(0,o.C_)(["flag",{active:e.Z}])},"Z",2),(0,a._)("span",{class:(0,o.C_)(["flag",{active:e.C}])},"C",2)])]})),_:1}),(0,a.Wm)(me,{title:"Memory Viewer"},{default:(0,a.w5)((function(){return[(0,a._)("div",M,[(0,a._)("div",S,[x,(0,a.wy)((0,a._)("input",{id:"memOffset","onUpdate:modelValue":r[10]||(r[10]=function(r){return e.memoryOffset=r}),type:"text",placeholder:"0000",onInput:r[11]||(r[11]=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e.updateMemoryOffset&&e.updateMemoryOffset.apply(e,r)})},null,544),[[n.nr,e.memoryOffset]])]),(0,a._)("div",A,[(0,a._)("div",F,[R,(0,a._)("div",I,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.memoryRows,(function(t){return(0,a.wg)(),(0,a.iD)("div",{key:t.address,class:"memory-row"},[(0,a._)("span",P,(0,o.zw)(e.formatHex(t.address,4)),1),(0,a._)("span",D,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.bytes,(function(l,o){return(0,a.wg)(),(0,a.iD)("input",{key:o,class:"byte editable-byte",value:e.formatByte(l),onBlur:function(r){return e.updateMemoryByte(t.address+o,r)},onKeyup:r[12]||(r[12]=(0,n.D2)((function(e){return e.target.blur()}),["enter"])),maxlength:"2"},null,40,k)})),128))]),(0,a._)("span",B,(0,o.zw)(t.ascii),1)])})),128))])])])])]})),_:1}),(0,a.Wm)(me,{title:"Sprite Viewer"},{default:(0,a.w5)((function(){return[(0,a._)("div",V,[(0,a._)("div",Y,[(0,a._)("div",H,[X,(0,a._)("button",{onClick:r[13]||(r[13]=function(r){return e.spriteScale=Math.max(1,e.spriteScale-1)})}," − "),(0,a._)("span",U,(0,o.zw)(e.spriteScale)+"x",1),(0,a._)("button",{onClick:r[14]||(r[14]=function(r){return e.spriteScale=Math.min(8,e.spriteScale+1)})}," + ")])]),(0,a._)("div",O,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sprites,(function(r,t){return(0,a.wg)(),(0,a.iD)("div",{key:t,class:"sprite-container"},[(0,a._)("div",N,[(0,a._)("span",{class:"sprite-label",title:"Sprite ".concat(t)},"S"+(0,o.zw)(t),9,z),(0,a._)("span",{class:"sprite-info",title:"".concat(r.multicolor?"Multicolor":"Single color"," mode").concat(r.expandX?", X-expanded":"").concat(r.expandY?", Y-expanded":"")},(0,o.zw)(r.multicolor?"MC":"SC")+" "+(0,o.zw)(r.expandX?"2X":"")+" "+(0,o.zw)(r.expandY?"2Y":""),9,L)]),(0,a._)("div",Z,[(0,a._)("canvas",{ref_for:!0,ref:function(r){return e.spriteCanvasRefs[t]=r},class:"sprite-canvas",width:(r.expandX?48:24)*e.spriteScale,height:(r.expandY?42:21)*e.spriteScale},null,8,$),(0,a._)("div",j,[(0,a._)("div",K,[T,(0,a._)("span",W,(0,o.zw)(e.formatHex(r.x,3)),1)]),(0,a._)("div",E,[q,(0,a._)("span",G,(0,o.zw)(e.formatHex(r.y,2)),1)]),(0,a._)("div",{class:"reg-row",title:"Color index: ".concat(r.color," (VIC-II register $D027+").concat(t,")")},[Q,(0,a._)("span",ee,(0,o.zw)(e.formatHex(r.color,1)),1)],8,J),(0,a._)("div",{class:"reg-row",title:"Sprite data pointer: ".concat(r.pointer," → memory address ").concat(e.formatHex(64*r.pointer,4))},[te,(0,a._)("span",ne,(0,o.zw)(e.formatHex(r.pointer,2))+"→"+(0,o.zw)(e.formatHex(64*r.pointer,4)),1)],8,re),(0,a._)("div",{class:"reg-row",title:r.enabled?"Sprite enabled ($D015 bit set)":"Sprite disabled ($D015 bit clear)"},[le,(0,a._)("span",oe,(0,o.zw)(r.enabled?"1":"0"),1)],8,ae),(0,a._)("div",{class:"reg-row",title:r.priority?"Behind foreground (priority=1, $D01B)":"In front of foreground (priority=0, $D01B)"},[ie,(0,a._)("span",ce,(0,o.zw)(r.priority?"B":"F"),1)],8,se)])])])})),128))])])]})),_:1}),(0,a.Wm)(me,{title:"Screen Viewer"},{default:(0,a.w5)((function(){return[(0,a._)("div",ue,[(0,a._)("div",fe,[(0,a._)("div",de,[pe,(0,a.wy)((0,a._)("select",{id:"screenSource","onUpdate:modelValue":r[15]||(r[15]=function(r){return e.screenSource=r})},ye,512),[[n.bM,e.screenSource]]),ge,(0,a.wy)((0,a._)("select",{id:"screenMode","onUpdate:modelValue":r[16]||(r[16]=function(r){return e.screenMode=r})},Ce,512),[[n.bM,e.screenMode]])]),"manual"===e.screenSource?((0,a.wg)(),(0,a.iD)("div",Me,[Se,(0,a.wy)((0,a._)("input",{id:"screenAddr","onUpdate:modelValue":r[17]||(r[17]=function(r){return e.manualScreenAddr=r}),placeholder:"0400"},null,512),[[n.nr,e.manualScreenAddr]]),xe,(0,a.wy)((0,a._)("input",{id:"colorAddr","onUpdate:modelValue":r[18]||(r[18]=function(r){return e.manualColorAddr=r}),placeholder:"D800"},null,512),[[n.nr,e.manualColorAddr]]),(0,a._)("label",Ae,(0,o.zw)(e.screenMode.startsWith("bitmap")?"Bitmap:":"Charset:"),1),(0,a.wy)((0,a._)("input",{id:"charsetAddr","onUpdate:modelValue":r[19]||(r[19]=function(r){return e.manualCharsetAddr=r}),placeholder:e.screenMode.startsWith("bitmap")?"2000":"1000"},null,8,Fe),[[n.nr,e.manualCharsetAddr]]),(0,a._)("button",{onClick:r[20]||(r[20]=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e.refreshScreenData&&e.refreshScreenData.apply(e,r)})},"Refresh")])):(0,a.kq)("",!0)]),(0,a._)("canvas",Re,null,512)])]})),_:1})])}var Pe=t(262),De=t(637),ke={class:"collapsible-tile"},Be={class:"tile-icon"},Ve={class:"tile-title"},Ye={class:"tile-content"};function He(e,r,t,l,s,i){return(0,a.wg)(),(0,a.iD)("div",ke,[(0,a._)("div",{class:"tile-header",onClick:r[0]||(r[0]=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e.toggle&&e.toggle.apply(e,r)})},[(0,a._)("span",Be,(0,o.zw)(e.isCollapsed?"▶":"▼"),1),(0,a._)("h3",Ve,(0,o.zw)(e.title),1)]),(0,a.wy)((0,a._)("div",Ye,[(0,a.WI)(e.$slots,"default",{},void 0,!0)],512),[[n.F8,!e.isCollapsed]])])}var Xe=(0,a.aZ)({name:"CollapsibleTile",props:{title:{type:String,required:!0},initiallyCollapsed:{type:Boolean,default:!1}},setup:function(e){var r=(0,Pe.iH)(e.initiallyCollapsed),t=function(){r.value=!r.value};return{isCollapsed:r,toggle:t}}}),Ue=t(744);const Oe=(0,Ue.Z)(Xe,[["render",He],["__scopeId","data-v-6186bc96"]]);var Ne=Oe,ze=(0,a.aZ)({name:"C64Registers",components:{CollapsibleTile:Ne},setup:function(e){var r=(0,De.oR)(),t="undefined"!==typeof acquireVsCodeApi?acquireVsCodeApi():null,n=(0,a.Fl)((function(){return r.state.A})),l=(0,a.Fl)((function(){return r.state.X})),o=(0,a.Fl)((function(){return r.state.Y})),s=(0,a.Fl)((function(){return r.state.SP})),i=(0,a.Fl)((function(){return r.state.PC})),c=(0,a.Fl)((function(){return r.state.N})),u=(0,a.Fl)((function(){return r.state.V})),f=(0,a.Fl)((function(){return r.state.B})),d=(0,a.Fl)((function(){return r.state.D})),p=(0,a.Fl)((function(){return r.state.I})),v=(0,a.Fl)((function(){return r.state.Z})),m=(0,a.Fl)((function(){return r.state.C})),y=(0,Pe.iH)("0000"),g=(0,Pe.iH)(0),_=16,h=16,b=(0,a.Fl)((function(){return r.state.MemoryViewer})),w=function(e,r){return"$"+e.toString(16).toUpperCase().padStart(r,"0")},C=function(e){return void 0===e?"??":e.toString(16).toUpperCase().padStart(2,"0")},M=function(){if(t){var e=g.value,r=e+h*_-1;t.postMessage({command:"getMemory",start:e,end:r,bankId:0,tag:"memoryViewer"})}},S=function(){try{var e=y.value.replace(/[$]/g,""),r=parseInt(e,16);!isNaN(r)&&r>=0&&r<=65535&&(g.value=r,M())}catch(t){}},x=(0,a.Fl)((function(){var e=[],r=b.value,t=[];if(r&&"string"===typeof r)for(var n=r.replace(/\s/g,""),a=0;a<n.length;a+=2){var l=parseInt(n.substr(a,2),16);isNaN(l)||t.push(l)}for(a=0;a<h;a++){for(var o=g.value+a*_&65535,s=[],i="",c=0;c<_;c++){var u=a*_+c;l=t[u];if(s.push(l),void 0!==l){var f=l>=32&&l<=126?String.fromCharCode(l):".";i+=f}else i+="."}e.push({address:o,bytes:s,ascii:i})}return e}));S();var A=function(e,r){var a=r.target,c=a.value.replace(/[$]/g,"").trim();try{var u=parseInt(c,16);isNaN(u)||t&&t.postMessage({command:"setRegister",register:e,value:u})}catch(f){a.value=w("A"===e?n.value:"X"===e?l.value:"Y"===e?o.value:"SP"===e?s.value:i.value,"PC"===e?4:2)}},F=function(e,r){var n=r.target,a=n.value.trim();try{var l=parseInt(a,16);!isNaN(l)&&l>=0&&l<=255?t&&t.postMessage({command:"setMemory",address:e,value:l}):M()}catch(o){M()}},R=(0,Pe.iH)([]),I=(0,Pe.iH)(3),P=(0,Pe.iH)(null),D=(0,Pe.iH)("vic"),k=(0,Pe.iH)("text-sc"),B=(0,Pe.iH)("0400"),V=(0,Pe.iH)("D800"),Y=(0,Pe.iH)("1000"),H=(0,a.Fl)((function(){return r.state.VicRegs||Array(47).fill(0)})),X=(0,a.Fl)((function(){return r.state.SpritePointers||Array(8).fill(0)})),U=(0,a.Fl)((function(){return r.state.SpriteMemory||new Uint8Array(2048)})),O=(0,a.Fl)((function(){return r.state.ScreenMemory||new Uint8Array(1e3)})),N=(0,a.Fl)((function(){return r.state.ColorMemory||new Uint8Array(1e3)})),z=(0,a.Fl)((function(){return r.state.CharsetMemory||new Uint8Array(2048)})),L=(0,a.Fl)((function(){var e=H.value[28]||0;return Array(8).fill(null).map((function(r,t){return 1===(e>>t&1)}))})),Z=(0,a.Fl)((function(){var e=H.value[29]||0;return Array(8).fill(null).map((function(r,t){return 1===(e>>t&1)}))})),$=(0,a.Fl)((function(){var e=H.value[23]||0;return Array(8).fill(null).map((function(r,t){return 1===(e>>t&1)}))})),j=(0,a.Fl)((function(){return Array(8).fill(null).map((function(e,r){return H.value[39+r]||1}))})),K=(0,a.Fl)((function(){return H.value[33]||0})),T=(0,a.Fl)((function(){return H.value[37]||0})),W=(0,a.Fl)((function(){return H.value[38]||0})),E=(0,a.Fl)((function(){return Array(8).fill(null).map((function(e,r){for(var t=X.value[r],n=64*t,a=n-2048,l=[],o=0;o<63;o++)l.push(U.value[a+o]||0);return l}))})),q=(0,a.Fl)((function(){var e=H.value[21]||0,r=H.value[27]||0,t=H.value[16]||0;return Array(8).fill(null).map((function(n,a){var l=H.value[2*a]||0,o=(t>>a&1)<<8,s=l|o,i=H.value[2*a+1]||0;return{multicolor:L.value[a],expandX:Z.value[a],expandY:$.value[a],data:E.value[a],color:j.value[a],x:s,y:i,pointer:X.value[a],enabled:1===(e>>a&1),priority:1===(r>>a&1)}}))})),G=["#000000","#ffffff","#880000","#aaffee","#cc44cc","#00cc55","#0000aa","#eeee77","#dd8855","#664400","#ff7777","#333333","#777777","#aaff66","#0088ff","#bbbbbb"],J=function(e,r){var t=q.value[r],n=t.data,a=I.value,l=(t.expandX?48:24)*a,o=(t.expandY?42:21)*a,s=(t.expandX?2:1)*a,i=(t.expandY?2:1)*a;e.clearRect(0,0,l,o);for(var c=0;c<21;c++){var u=3*c,f=n[u]||0,d=n[u+1]||0,p=n[u+2]||0;if(t.multicolor)for(var v=0;v<12;v++){var m=Math.floor(v/4),y=v%4,g=6-2*y,_=0===m?f:1===m?d:p,h=_>>g&3,b="";switch(h){case 0:b="transparent";break;case 1:b=G[15&T.value]||"#fff";break;case 2:b=G[15&t.color]||"#fff";break;case 3:b=G[15&W.value]||"#fff";break}if("transparent"!==b){e.fillStyle=b;var w=2*v*s,C=c*i;e.fillRect(w,C,2*s,i)}}else for(v=0;v<24;v++){m=Math.floor(v/8),g=7-v%8,_=0===m?f:1===m?d:p,h=_>>g&1;if(1===h){e.fillStyle=G[15&t.color]||"#fff";w=v*s,C=c*i;e.fillRect(w,C,s,i)}}}},Q=function(){(0,a.Y3)((function(){R.value.forEach((function(e,r){if(e){var t=e.getContext("2d");t&&J(t,r)}}))}))};(0,a.YP)([E,L,Z,$,I],(function(){Q()}),{deep:!0});var ee=function(){if(P.value){var e=P.value.getContext("2d");if(e){var r=O.value,t=N.value,n=z.value,a=K.value,l=k.value;if(console.log("renderScreen called",{mode:l,screenMemLen:r.length,colorMemLen:t.length,charMemLen:n.length,bgColor:a,firstScreenBytes:Array.from(r.slice(0,10)),firstColorBytes:Array.from(t.slice(0,10)),firstCharBytes:Array.from(n.slice(0,16))}),e.fillStyle=G[15&a],e.fillRect(0,0,320,200),"text-sc"===l)for(var o=0;o<25;o++)for(var s=0;s<40;s++)for(var i=40*o+s,c=r[i]||0,u=t[i]||1,f=8*c,d=0;d<8;d++)for(var p=n[f+d]||0,v=0;v<8;v++){var m=p>>7-v&1;m&&(e.fillStyle=G[15&u],e.fillRect(8*s+v,8*o+d,1,1))}else if("text-mc"===l){var y=H.value[34]||0,g=H.value[35]||0;for(o=0;o<25;o++)for(s=0;s<40;s++){i=40*o+s,c=r[i]||0;var _=t[i]||1,h=(f=8*c,_>=8);for(d=0;d<8;d++){p=n[f+d]||0;if(h)for(var b=7&_,w=0;w<4;w++){var C=p>>6-2*w&3;u=void 0;switch(C){case 0:u=a;break;case 1:u=y;break;case 2:u=g;break;case 3:u=b;break}e.fillStyle=G[15&u],e.fillRect(8*s+2*w,8*o+d,2,1)}else{var M=15&_;for(v=0;v<8;v++){m=p>>7-v&1;m&&(e.fillStyle=G[M],e.fillRect(8*s+v,8*o+d,1,1))}}}}}else if("bitmap-sc"===l)for(var S=0;S<200;S++){d=Math.floor(S/8);for(var x=S%8,A=0;A<40;A++){i=40*d+A;var F=r[i]||0,R=(M=F>>4&15,15&F),I=320*d+8*A+x,D=n[I]||0;for(m=0;m<8;m++){var B=D>>7-m&1;e.fillStyle=G[B?M:R],e.fillRect(8*A+m,S,1,1)}}}else if("bitmap-mc"===l)for(y=H.value[34]||0,g=H.value[35]||0,S=0;S<200;S++)for(d=Math.floor(S/8),x=S%8,A=0;A<40;A++){i=40*d+A,F=r[i]||0;var V=F>>4&15,Y=40*d+A,X=15&t[Y];for(I=320*d+8*A+x,D=n[I]||0,w=0;w<4;w++){C=D>>6-2*w&3,u=void 0;switch(C){case 0:u=a;break;case 1:u=V;break;case 2:u=X;break;case 3:u=g;break}e.fillStyle=G[15&u],e.fillRect(8*A+2*w,S,2,1)}}}}};(0,a.YP)([O,N,z,K,k],(function(){ee()}),{deep:!0});var re=function(){if(t&&"manual"===D.value)try{var e=parseInt(B.value.replace(/[$]/g,""),16),r=parseInt(V.value.replace(/[$]/g,""),16),n=parseInt(Y.value.replace(/[$]/g,""),16);k.value.startsWith("text")?(t.postMessage({command:"getMemory",start:e,end:e+999,bankId:0,tag:"screenMemory"}),t.postMessage({command:"getMemory",start:r,end:r+999,bankId:0,tag:"colorMemory"}),t.postMessage({command:"getMemory",start:n,end:n+2047,bankId:0,tag:"charsetMemory"})):(t.postMessage({command:"getMemory",start:e,end:e+999,bankId:0,tag:"screenMemory"}),t.postMessage({command:"getMemory",start:r,end:r+999,bankId:0,tag:"colorMemory"}),t.postMessage({command:"getMemory",start:n,end:n+7999,bankId:0,tag:"charsetMemory"}))}catch(a){console.error("Invalid address format",a)}};return(0,a.bv)((function(){Q(),ee()})),{A:n,X:l,Y:o,SP:s,PC:i,N:c,V:u,B:f,D:d,I:p,Z:v,C:m,formatHex:w,formatByte:C,memoryOffset:y,memoryRows:x,updateMemoryOffset:S,updateRegister:A,updateMemoryByte:F,sprites:q,spriteCanvasRefs:R,spriteScale:I,screenCanvas:P,screenSource:D,screenMode:k,manualScreenAddr:B,manualColorAddr:V,manualCharsetAddr:Y,refreshScreenData:re}}});const Le=(0,Ue.Z)(ze,[["render",Ie],["__scopeId","data-v-db4cec7c"]]);var Ze=Le,$e={name:"App",components:{C64Registers:Ze}};const je=(0,Ue.Z)($e,[["render",l]]);var Ke=je,Te=(0,De.MT)({state:{A:0,X:0,Y:0,SP:0,PC:0,FL:0,N:!1,V:!1,B:!1,D:!1,I:!1,Z:!1,C:!1,Memory:"",MemoryViewer:"",VicRegs:Array(47).fill(0),SpritePointers:Array(8).fill(0),SpriteMemory:new Uint8Array(2048),ScreenMemory:new Uint8Array(1e3),ColorMemory:new Uint8Array(1e3),CharsetMemory:new Uint8Array(2048)},getters:{A:function(e){return e.A},X:function(e){return e.X},Y:function(e){return e.Y},SP:function(e){return e.SP},PC:function(e){return e.PC},flags:function(e){return{N:e.N,V:e.V,B:e.B,D:e.D,I:e.I,Z:e.Z,C:e.C}}},mutations:{setRegisters:function(e,r){void 0!==r.A&&(e.A=r.A),void 0!==r.X&&(e.X=r.X),void 0!==r.Y&&(e.Y=r.Y),void 0!==r.SP&&(e.SP=r.SP),void 0!==r.PC&&(e.PC=r.PC),void 0!==r.FL&&(e.FL=r.FL,e.N=!!(128&r.FL),e.V=!!(64&r.FL),e.B=!!(16&r.FL),e.D=!!(8&r.FL),e.I=!!(4&r.FL),e.Z=!!(2&r.FL),e.C=!!(1&r.FL))},setA:function(e,r){e.A=r},setMemory:function(e,r){e.Memory=r},setMemoryViewer:function(e,r){e.MemoryViewer=r},setVicRegs:function(e,r){e.VicRegs=r},setSpritePointers:function(e,r){e.SpritePointers=r},setSpriteMemory:function(e,r){e.SpriteMemory=r},setScreenMemory:function(e,r){e.ScreenMemory=r},setColorMemory:function(e,r){e.ColorMemory=r},setCharsetMemory:function(e,r){e.CharsetMemory=r}},actions:{},modules:{},plugins:[function(e){function r(e){var r=[];if(e&&"string"===typeof e)for(var t=e.replace(/\s/g,""),n=0;n<t.length;n+=2){var a=parseInt(t.substr(n,2),16);isNaN(a)||r.push(a)}return r}window.addEventListener("message",(function(t){var n=t.data;if(("debugStopped"===n.type||n.regs&&n.invRegs)&&n.regs&&n.invRegs){for(var a={},l=["A","X","Y","SP","PC","FL"],o=0,s=l;o<s.length;o++){var i=s[o];if(n.invRegs[i]){var c=n.invRegs[i].id;n.regs[c]&&(a[i]=n.regs[c].value)}}e.commit("setRegisters",a)}if("memoryViewer"===n.tag&&n.memory&&e.commit("setMemoryViewer",n.memory),"vicRegs"===n.tag&&n.memory){var u=r(n.memory);e.commit("setVicRegs",u)}if("spritePointers"===n.tag&&n.memory){u=r(n.memory);e.commit("setSpritePointers",u)}if("spriteMemory"===n.tag&&n.memory){u=r(n.memory);e.commit("setSpriteMemory",new Uint8Array(u))}if("screenMemory"===n.tag&&n.memory){u=r(n.memory);e.commit("setScreenMemory",new Uint8Array(u))}if("colorMemory"===n.tag&&n.memory){u=r(n.memory);e.commit("setColorMemory",new Uint8Array(u))}if("charsetMemory"===n.tag&&n.memory){u=r(n.memory);e.commit("setCharsetMemory",new Uint8Array(u))}}))}]});(0,n.ri)(Ke).use(Te).mount("#app")}},r={};function t(n){var a=r[n];if(void 0!==a)return a.exports;var l=r[n]={exports:{}};return e[n](l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(r,n,a,l){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],l=e[u][2];for(var s=!0,i=0;i<n.length;i++)(!1&l||o>=l)&&Object.keys(t.O).every((function(e){return t.O[e](n[i])}))?n.splice(i--,1):(s=!1,l<o&&(o=l));if(s){e.splice(u--,1);var c=a();void 0!==c&&(r=c)}}return r}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,a,l]}}(),function(){t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,n){var a,l,o=n[0],s=n[1],i=n[2],c=0;if(o.some((function(r){return 0!==e[r]}))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(i)var u=i(t)}for(r&&r(n);c<o.length;c++)l=o[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},n=self["webpackChunkc64jasm_view"]=self["webpackChunkc64jasm_view"]||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(781)}));n=t.O(n)})();
//# sourceMappingURL=app.js.map